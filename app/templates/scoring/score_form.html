{% extends "layout.html" %}
{% import "bootstrap/wtf.html" as wtf %}
{% import "_helpers.html" as macros %}
{% block title %}FLL Score Form{% endblock %}
{% block pageContent %}
  <h1>FLL Score Entry</h1>
  <script>window.jQuery || document.write('<script src="{{url_for('static', filename='js/libs/jquery-1.11.3.min.js') }}">\x3C/script>')</script>
  <script type="text/javascript">
    // TODO move this to score-specific JS file
    $( document ).ready(function() {
      updateTotal();
    });

    $(function() {
      $('#scoreForm').change(function() {
        updateTotal();
      });
    });

    function updateTotal() {
      $.getJSON('/scores/_add_numbers', {
        tree_branch_is_closer: $("#tree_branch_is_closer").is(':checked'),
        tree_branch_is_intact: $("#tree_branch_is_intact").is(':checked'),
        cargo_plane_location: $("#cargo_plane_location").val()
      }, function(data) {
        $("#result").text(data.result);
      });
      return false;
    }
  </script>
  <h4>Total: <span id="result">0</span></h4>
  {% if team_id and round_number %}
    <p>Team: {{ team_id }}</p>
    <p>Round: {{ round_number }}<p>
  {% endif %}
  {% call macros.render_form(form) %}
      {{ macros.render_field(form.team_id, placeholder='00000') }}
      {{ macros.render_field(form.round_number) }}
      {{ macros.render_checkbox_field(form.tree_branch_is_closer) }}
      {{ macros.render_checkbox_field(form.tree_branch_is_intact) }}
      {{ macros.render_radio_field(form.cargo_plane_location) }}
  {% endcall %}
{% endblock %}
